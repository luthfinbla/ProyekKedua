/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],c=0;c<t.length;c++){var u=t[c],s=r.base?u[0]+r.base:u[0],f=i[s]||0,l="".concat(s," ").concat(f);i[s]=f+1;var p=n(l),d={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var v=o(d,r);r.byIndex=c,e.splice(c,0,{identifier:l,updater:v,references:1})}a.push(l)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var u=r(t,o),s=0;s<i.length;s++){var f=n(i[s]);0===e[f].references&&(e[f].updater(),e.splice(f,1))}i=u}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},177:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const c=a},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var u=this[c][0];null!=u&&(a[u]=!0)}for(var s=0;s<t.length;s++){var f=[].concat(t[s]);r&&a[f[0]]||(void 0!==i&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=i),n&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=n):f[2]=n),o&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=o):f[4]="".concat(o)),e.push(f))}},e}},452:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const c=a},469:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,"// extracted by mini-css-extract-plugin\nexport {};",""]);const c=a},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),o=n.n(r),i=n(825),a=n.n(i),c=n(659),u=n.n(c),s=n(56),f=n.n(s),l=n(540),p=n.n(l),d=n(113),v=n.n(d),y=n(177),m={};m.styleTagTransform=v(),m.setAttributes=f(),m.insert=u().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=p(),o()(y.A,m),y.A&&y.A.locals&&y.A.locals;const h="https://story-api.dicoding.dev/v1";function b(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return g(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(g(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,g(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,g(l,"constructor",s),g(s,"constructor",u),u.displayName="GeneratorFunction",g(s,o,"GeneratorFunction"),g(l),g(l,o,"Generator"),g(l,r,function(){return this}),g(l,"toString",function(){return"[object Generator]"}),(b=function(){return{w:i,m:p}})()}function g(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}g=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){g(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},g(t,e,n,r)}function w(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function S(){return j.apply(this,arguments)}function j(){var t;return t=b().m(function t(){var e,n,r;return b().w(function(t){for(;;)switch(t.n){case 0:return e=localStorage.getItem("authToken"),console.log("🔑 TOKEN:",e),t.n=1,fetch("".concat(h,"/stories"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 1:if(n=t.v,console.log("📡 STATUS:",n.status),n.ok){t.n=2;break}throw new Error("Gagal mengambil data cerita");case 2:return t.n=3,n.json();case 3:return r=t.v,t.a(2,r.listStory)}},t)}),j=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){w(i,r,o,a,c,"next",t)}function c(t){w(i,r,o,a,c,"throw",t)}a(void 0)})},j.apply(this,arguments)}function O(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return T(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(T(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,T(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,T(l,"constructor",s),T(s,"constructor",u),u.displayName="GeneratorFunction",T(s,o,"GeneratorFunction"),T(l),T(l,o,"Generator"),T(l,r,function(){return this}),T(l,"toString",function(){return"[object Generator]"}),(O=function(){return{w:i,m:p}})()}function T(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}T=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){T(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},T(t,e,n,r)}function k(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function P(t){return E.apply(this,arguments)}function E(){var t;return t=O().m(function t(e){var n,r,o,i,a,c,u,s;return O().w(function(t){for(;;)switch(t.n){case 0:return n=e.image,r=e.description,o=e.lat,i=e.lon,a=localStorage.getItem("authToken"),(c=new FormData).append("photo",G(n)),c.append("description",r),c.append("lat",o),c.append("lon",i),t.n=1,fetch("".concat(h,"/stories"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:c});case 1:return u=t.v,t.n=2,u.json();case 2:return s=t.v,t.a(2,s)}},t)}),E=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){k(i,r,o,a,c,"next",t)}function c(t){k(i,r,o,a,c,"throw",t)}a(void 0)})},E.apply(this,arguments)}function G(t){for(var e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),o=new Uint8Array(r),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);return new Blob([r],{type:n})}const x=(t,e)=>e.some(e=>t instanceof e);let _,I;const A=new WeakMap,C=new WeakMap,B=new WeakMap;let F={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return A.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return N(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function D(t){F=t(F)}function M(t){return"function"==typeof t?(e=t,(I||(I=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(q(this),t),N(this.request)}:function(...t){return N(e.apply(q(this),t))}):(t instanceof IDBTransaction&&function(t){if(A.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});A.set(t,e)}(t),x(t,_||(_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,F):t);var e}function N(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(N(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)});return B.set(e,t),e}(t);if(C.has(t))return C.get(t);const e=M(t);return e!==t&&(C.set(t,e),B.set(e,t)),e}const q=t=>B.get(t),R=["get","getKey","getAll","getAllKeys","count"],W=["put","add","delete","clear"],H=new Map;function K(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(H.get(e))return H.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=W.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!R.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return H.set(e,i),i}D(t=>({...t,get:(e,n,r)=>K(e,n)||t.get(e,n,r),has:(e,n)=>!!K(e,n)||t.has(e,n)}));const U=["continue","continuePrimaryKey","advance"],V={},z=new WeakMap,J=new WeakMap,$={get(t,e){if(!U.includes(e))return t[e];let n=V[e];return n||(n=V[e]=function(...t){z.set(this,J.get(this)[e](...t))}),n}};async function*Y(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;const n=new Proxy(e,$);for(J.set(n,e),B.set(n,q(e));e;)yield n,e=await(z.get(n)||e.continue()),z.delete(n)}function Q(t,e){return e===Symbol.asyncIterator&&x(t,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===e&&x(t,[IDBIndex,IDBObjectStore])}function X(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Z(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Z(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Z(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Z(l,"constructor",s),Z(s,"constructor",u),u.displayName="GeneratorFunction",Z(s,o,"GeneratorFunction"),Z(l),Z(l,o,"Generator"),Z(l,r,function(){return this}),Z(l,"toString",function(){return"[object Generator]"}),(X=function(){return{w:i,m:p}})()}function Z(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Z=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Z(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Z(t,e,n,r)}function tt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function et(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){tt(i,r,o,a,c,"next",t)}function c(t){tt(i,r,o,a,c,"throw",t)}a(void 0)})}}D(t=>({...t,get:(e,n,r)=>Q(e,n)?Y:t.get(e,n,r),has:(e,n)=>Q(e,n)||t.has(e,n)}));var nt="stories",rt=function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=N(a);return r&&a.addEventListener("upgradeneeded",t=>{r(N(a.result),t.oldVersion,t.newVersion,N(a.transaction),t)}),n&&a.addEventListener("blocked",t=>n(t.oldVersion,t.newVersion,t)),c.then(t=>{i&&t.addEventListener("close",()=>i()),o&&t.addEventListener("versionchange",t=>o(t.oldVersion,t.newVersion,t))}).catch(()=>{}),c}("berbagi-cerita-db",1,{upgrade:function(t){t.objectStoreNames.contains(nt)||t.createObjectStore(nt,{keyPath:"id"})}});const ot=function(){return et(X().m(function t(){return X().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,rt;case 1:return t.a(2,t.v.getAll(nt))}},t)}))()},it=function(t){return et(X().m(function e(){return X().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,rt;case 1:return e.a(2,e.v.put(nt,t))}},e)}))()},at=function(t){return et(X().m(function e(){return X().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,rt;case 1:return e.a(2,e.v.delete(nt,t))}},e)}))()};function ct(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return ut(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ut(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ut(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,ut(l,"constructor",s),ut(s,"constructor",u),u.displayName="GeneratorFunction",ut(s,o,"GeneratorFunction"),ut(l),ut(l,o,"Generator"),ut(l,r,function(){return this}),ut(l,"toString",function(){return"[object Generator]"}),(ct=function(){return{w:i,m:p}})()}function ut(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ut=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){ut(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},ut(t,e,n,r)}function st(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}var ft=null;function lt(t){var e=document.getElementById("mapDisplay");e&&(ft&&(ft.remove(),ft=null),ft=L.map(e).setView([-2.5,117],5),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(ft),t.forEach(function(t){t.lat&&t.lon&&L.marker([t.lat,t.lon]).addTo(ft).bindPopup("<strong>".concat(t.name,"</strong><br>").concat(t.description,"<br>").concat(t.createdAt))}))}function pt(t){var e=document.getElementById("storyList");e&&(e.innerHTML="",t.forEach(function(t){var n=document.createElement("div");n.classList.add("story");var r=t.createdAt?new Date(t.createdAt).toLocaleDateString("id-ID"):"Tanggal tidak tersedia";n.innerHTML='\n      <img src="'.concat(t.photoUrl,'" alt="').concat(t.name,'" />\n      <h3>').concat(t.name,"</h3>\n      <p>").concat(t.description,"</p>\n      <p><strong>Tanggal:</strong> ").concat(r,"</p>\n    "),e.appendChild(n)}))}function dt(t){var e=document.querySelector("#storyList");e&&(e.innerHTML='<p class="error">'.concat(t,"</p>"))}const vt={renderStoryList:pt,renderStoryItem:function(t){var e=document.createElement("div");return e.classList.add("story"),e.innerHTML='\n    <img src="'.concat(t.photoUrl,'" alt="').concat(t.name,'" />\n    <h3>').concat(t.name,"</h3>\n    <p>").concat(t.description,"</p>\n  "),e},showError:dt,bindFormSubmit:function(t){var e=document.getElementById("storyForm");e&&e.addEventListener("submit",function(){var e,n=(e=ct().m(function e(n){var r;return ct().w(function(e){for(;;)switch(e.n){case 0:return n.preventDefault(),r=document.getElementById("description").value,e.n=1,t(r);case 1:return e.a(2)}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(t){st(i,r,o,a,c,"next",t)}function c(t){st(i,r,o,a,c,"throw",t)}a(void 0)})});return function(t){return n.apply(this,arguments)}}())},initCamera:function(t){var e=t.width,n=t.onCapture,r=document.getElementById("camera-video"),o=document.getElementById("camera-canvas"),i=document.getElementById("camera-take-button");if(o&&r&&i){var a=o.getContext("2d"),c=0,u=!1;navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){r.srcObject=t,r.play()}).catch(function(t){return console.error("Kamera gagal:",t)}),r.addEventListener("canplay",function(){u||(c=r.videoHeight/(r.videoWidth/e),r.setAttribute("width",e),r.setAttribute("height",c),o.setAttribute("width",e),o.setAttribute("height",c),u=!0)}),i.addEventListener("click",function(){a.drawImage(r,0,0,e,c);var t=o.toDataURL("image/png");n(t)})}else console.warn("Elemen kamera belum tersedia, setupCamera dibatalkan")},initMapInput:function(t){var e=document.getElementById("mapInput");if(e){var n=L.map(e).setView([-2.5,117],5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(n);var r=null;n.on("click",function(e){var o=e.latlng,i=o.lat,a=o.lng;r?r.setLatLng([i,a]):r=L.marker([i,a]).addTo(n),t({lat:i,lng:a})})}}};function yt(t){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yt(t)}function mt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return ht(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ht(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ht(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,ht(l,"constructor",s),ht(s,"constructor",u),u.displayName="GeneratorFunction",ht(s,o,"GeneratorFunction"),ht(l),ht(l,o,"Generator"),ht(l,r,function(){return this}),ht(l,"toString",function(){return"[object Generator]"}),(mt=function(){return{w:i,m:p}})()}function ht(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ht=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){ht(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},ht(t,e,n,r)}function bt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function gt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){bt(i,r,o,a,c,"next",t)}function c(t){bt(i,r,o,a,c,"throw",t)}a(void 0)})}}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,St(r.key),r)}}function St(t){var e=function(t){if("object"!=yt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yt(e)?e:e+""}var jt=function(){return t=function t(e){var n=e.view,r=e.getAllStories;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bindFormSubmit=n.bindFormSubmit,this.initCamera=n.initCamera,this.initMapInput=n.initMapInput,this.renderStoryList=n.renderStoryList,this.showError=n.showError,this.getAllStories=r,this.view=n,this.getAllStories=r},e=[{key:"init",value:(i=gt(mt().m(function t(){var e,n,r,o=this;return mt().w(function(t){for(;;)switch(t.n){case 0:return this.bindFormSubmit(this.handleSubmit.bind(this)),this.initCamera({width:320,onCapture:function(t){o.capturedImage=t}}),this.initMapInput(function(t){var e=t.lat,n=t.lng;o.selectedLat=e,o.selectedLon=n}),t.n=1,this.loadStories();case 1:return t.p=1,t.n=2,this.getAllStories();case 2:(e=t.v).forEach(function(t){it(t)}),this.view.renderStoryList(e),t.n=5;break;case 3:return t.p=3,r=t.v,console.error("Gagal ambil dari API, ambil dari IndexedDB:",r),t.n=4,ot();case 4:n=t.v,this.view.renderStoryList(n);case 5:return t.a(2)}},t,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"deleteStory",value:(o=gt(mt().m(function t(e){var n;return mt().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,at(e);case 1:return t.n=2,ot();case 2:n=t.v,this.view.renderStoryList(n);case 3:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"handleSubmit",value:(r=gt(mt().m(function t(e){return mt().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,P({description:e,photo:this.capturedImage,lat:this.selectedLat,lon:this.selectedLon});case 1:return t.n=2,this.loadStories();case 2:t.n=4;break;case 3:t.p=3,t.v,dt("Gagal mengunggah cerita");case 4:return t.a(2)}},t,this,[[0,3]])})),function(t){return r.apply(this,arguments)})},{key:"loadStories",value:(n=gt(mt().m(function t(){var e,n;return mt().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,this.getAllStories();case 1:if(e=t.v,console.log("✅ Stories fetched:",e),e&&0!==e.length){t.n=2;break}return dt("Tidak ada cerita ditemukan."),t.a(2);case 2:pt(e),lt(e),t.n=4;break;case 3:t.p=3,n=t.v,console.error("❌ Gagal memuat cerita:",n),dt("Gagal memuat cerita");case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return n.apply(this,arguments)})}],e&&wt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,o,i}();const Ot=jt;function Tt(t){return Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tt(t)}function kt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Pt(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Pt(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Pt(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Pt(l,"constructor",s),Pt(s,"constructor",u),u.displayName="GeneratorFunction",Pt(s,o,"GeneratorFunction"),Pt(l),Pt(l,o,"Generator"),Pt(l,r,function(){return this}),Pt(l,"toString",function(){return"[object Generator]"}),(kt=function(){return{w:i,m:p}})()}function Pt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pt=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Pt(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Pt(t,e,n,r)}function Et(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Lt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Et(i,r,o,a,c,"next",t)}function c(t){Et(i,r,o,a,c,"throw",t)}a(void 0)})}}function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xt(r.key),r)}}function xt(t){var e=function(t){if("object"!=Tt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Tt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tt(e)?e:e+""}var _t=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=Lt(kt().m(function t(){return kt().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <a href="#main-content" class="skip-link">Lewati ke konten utama</a>\n\n      <header id="site-header">\n        <div class="main-header container">\n          <a class="brand-name" href="#/">Berbagi Cerita</a>\n\n          <nav id="navigation-drawer" class="navigation-drawer">\n            <ul id="nav-list" class="nav-list">\n              <li><a href="#/">Beranda</a></li>\n              <li><a href="#/add">Tambah Cerita</a></li>\n              <li><a href="#/about">Tentang</a></li>\n            </ul>\n          </nav>\n          <button id="drawer-button" class="drawer-button">☰</button>\n        </div>\n      </header>\n\n      <main id="main-content" tabindex="-1">\n        <section>\n          <h2>Daftar Cerita</h2>\n          <div id="error-container" style="color: red; margin: 16px 0;"></div>\n          <div id="storyList" class="story-container"></div>\n        </section>\n\n        <section>\n          <h2>Peta Lokasi Cerita</h2>\n          <div id="mapDisplay" style="height: 400px; margin-bottom: 40px;"></div>\n        </section>\n      </main>\n\n      <footer id="site-footer">\n        <p>&copy; 2025 Berbagi Cerita</p>\n      </footer>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=Lt(kt().m(function t(){var e,n,r,o,i,a,c;return kt().w(function(t){for(;;)switch(t.n){case 0:return localStorage.getItem("token")&&(e=document.querySelector("#site-header"),n=document.querySelector("#site-footer"),r=document.querySelector("#drawer-button"),o=document.querySelector("#navigation-drawer"),e&&(e.style.display=""),n&&(n.style.display=""),r&&(r.style.display=""),o&&(o.style.display="")),t.p=1,i=new Ot({view:vt,getAllStories:S}),t.n=2,i.init();case 2:t.n=4;break;case 3:t.p=3,c=t.v,console.error("❌ Gagal menampilkan cerita:",c),(a=document.querySelector("#error-container"))&&(a.textContent="Gagal memuat cerita. Silakan coba lagi.");case 4:return t.a(2)}},t,null,[[1,3]])})),function(){return n.apply(this,arguments)})}],e&&Gt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function At(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ct(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Ct(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ct(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Ct(l,"constructor",s),Ct(s,"constructor",u),u.displayName="GeneratorFunction",Ct(s,o,"GeneratorFunction"),Ct(l),Ct(l,o,"Generator"),Ct(l,r,function(){return this}),Ct(l,"toString",function(){return"[object Generator]"}),(At=function(){return{w:i,m:p}})()}function Ct(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ct=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ct(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Ct(t,e,n,r)}function Bt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ft(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Bt(i,r,o,a,c,"next",t)}function c(t){Bt(i,r,o,a,c,"throw",t)}a(void 0)})}}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mt(r.key),r)}}function Mt(t){var e=function(t){if("object"!=It(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}var Nt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=Ft(At().m(function t(){return At().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="container">\n        <h1>About Page</h1>\n      </section>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=Ft(At().m(function t(){return At().w(function(t){for(;;)if(0===t.n)return t.a(2)},t)})),function(){return n.apply(this,arguments)})}],e&&Dt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();const qt=function(t){var e=document.getElementById("storyForm"),n=document.getElementById("description");e&&n&&e.addEventListener("submit",function(e){e.preventDefault(),t(n.value)})},Rt=function(t){var e=t.width,n=t.onCapture,r=document.getElementById("camera-video"),o=document.getElementById("camera-canvas"),i=document.getElementById("camera-take-button"),a=document.getElementById("camera-output-list");if(r&&o&&i&&a){var c=o.getContext("2d"),u=0,s=!1;navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(function(t){r.srcObject=t,r.play()}).catch(function(t){return console.error("Kamera gagal:",t)}),r.addEventListener("canplay",function(){s||(u=r.videoHeight/(r.videoWidth/e),r.setAttribute("width",e),r.setAttribute("height",u),o.setAttribute("width",e),o.setAttribute("height",u),s=!0)}),i.addEventListener("click",function(){var t=function(){o.width=e,o.height=u,c.drawImage(r,0,0,e,u);var t=o.toDataURL("image/png");return a.innerHTML='<li><img src="'.concat(t,'" alt="Hasil Kamera"/></li>'),t}();n(t)})}else console.warn("Elemen kamera belum tersedia")},Wt=function(t){var e=document.getElementById("mapInput");if(e){var n,r=L.map(e).setView([-2.5,117],5);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(r),r.on("click",function(e){var o=e.latlng,i=o.lat,a=o.lng;n?n.setLatLng([i,a]):n=L.marker([i,a]).addTo(r),t({lat:i,lng:a})})}};function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Kt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Ut(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Ut(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Ut(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Ut(l,"constructor",s),Ut(s,"constructor",u),u.displayName="GeneratorFunction",Ut(s,o,"GeneratorFunction"),Ut(l),Ut(l,o,"Generator"),Ut(l,r,function(){return this}),Ut(l,"toString",function(){return"[object Generator]"}),(Kt=function(){return{w:i,m:p}})()}function Ut(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Ut=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Ut(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Ut(t,e,n,r)}function Vt(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function zt(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Vt(i,r,o,a,c,"next",t)}function c(t){Vt(i,r,o,a,c,"throw",t)}a(void 0)})}}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function $t(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}var Yt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.capturedImage=null,this.selectedLat=null,this.selectedLon=null},e=[{key:"render",value:(r=zt(Kt().m(function t(){return Kt().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <section class="add-story">\n        <h2>Tambah Cerita</h2>\n        <form id="storyForm">\n          <label for="description">Deskripsi:</label><br />\n          <textarea id="description" placeholder="Tulis cerita kamu..." required></textarea><br />\n\n          <div class="camera-section">\n            <video id="camera-video" autoplay></video>\n            <canvas id="camera-canvas" hidden></canvas>\n            <button type="button" id="camera-take-button">Ambil Gambar</button>\n            <ul id="camera-output-list"></ul>\n          </div>\n\n          <div id="mapInput" style="height: 300px; margin-top: 10px;"></div>\n\n          <button type="submit">Kirim Cerita</button>\n        </form>\n      </section>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=zt(Kt().m(function t(){var e=this;return Kt().w(function(t){for(;;)switch(t.n){case 0:Rt({width:320,onCapture:function(t){e.capturedImage=t}}),Wt(function(t){var n=t.lat,r=t.lng;e.selectedLat=n,e.selectedLon=r}),qt(function(){var t=zt(Kt().m(function t(n){var r,o;return Kt().w(function(t){for(;;)switch(t.n){case 0:if(e.capturedImage&&null!=e.selectedLat&&null!=e.selectedLon){t.n=1;break}return alert("Pastikan Anda sudah mengambil gambar dan memilih lokasi."),t.a(2);case 1:return t.p=1,t.n=2,P({image:e.capturedImage,description:n,lat:e.selectedLat,lon:e.selectedLon});case 2:r=t.v,console.log("Cerita berhasil dikirim:",r),window.location.hash="#/home",t.n=4;break;case 3:t.p=3,o=t.v,console.error("Gagal mengirim cerita:",o),alert("Gagal mengirim cerita. Coba lagi.");case 4:return t.a(2)}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})}],e&&Jt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),Qt=n(452),Xt={};function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function te(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return ee(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(ee(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,ee(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,ee(l,"constructor",s),ee(s,"constructor",u),u.displayName="GeneratorFunction",ee(s,o,"GeneratorFunction"),ee(l),ee(l,o,"Generator"),ee(l,r,function(){return this}),ee(l,"toString",function(){return"[object Generator]"}),(te=function(){return{w:i,m:p}})()}function ee(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ee=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){ee(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},ee(t,e,n,r)}function ne(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function re(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){ne(i,r,o,a,c,"next",t)}function c(t){ne(i,r,o,a,c,"throw",t)}a(void 0)})}}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ie(r.key),r)}}function ie(t){var e=function(t){if("object"!=Zt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zt(e)?e:e+""}Xt.styleTagTransform=v(),Xt.setAttributes=f(),Xt.insert=u().bind(null,"head"),Xt.domAPI=a(),Xt.insertStyleElement=p(),o()(Qt.A,Xt),Qt.A&&Qt.A.locals&&Qt.A.locals;var ae=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=re(te().m(function t(){return te().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="wrapper">\n        <div class="title">Login Form</div>\n        <form id="login-form">\n          <div class="field">\n            <input type="text" id="email" required />\n            <label>Email Address</label>\n          </div>\n          <div class="field">\n            <input type="password" id="password" required />\n            <label>Password</label>\n          </div>\n          <div class="field">\n            <input type="submit" value="Login" />\n          </div>\n        </form>\n      </div>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=re(te().m(function t(){return te().w(function(t){for(;;)switch(t.n){case 0:document.getElementById("login-form").addEventListener("submit",function(){var t=re(te().m(function t(e){var n,r,o,i,a;return te().w(function(t){for(;;)switch(t.n){case 0:return e.preventDefault(),n=document.getElementById("email").value,r=document.getElementById("password").value,t.p=1,t.n=2,fetch("".concat(h,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:r})});case 2:return o=t.v,t.n=3,o.json();case 3:i=t.v,console.log("Login response:",i),o.ok&&i.loginResult&&i.loginResult.token?(localStorage.setItem("authToken",i.loginResult.token),window.location.hash="#/home"):alert(i.message||"Login gagal"),t.n=5;break;case 4:t.p=4,a=t.v,console.error("Login error:",a),alert("Terjadi kesalahan saat login");case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})}],e&&oe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}(),ce=n(469),ue={};ue.styleTagTransform=v(),ue.setAttributes=f(),ue.insert=u().bind(null,"head"),ue.domAPI=a(),ue.insertStyleElement=p(),o()(ce.A,ue),ce.A&&ce.A.locals&&ce.A.locals;const se={GET_ALL_STORIES:"".concat(h,"/stories"),POST_STORY:"".concat(h,"/stories"),REGISTER:"".concat(h,"/register"),LOGIN:"".concat(h,"/login")};function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function le(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return pe(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(pe(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,pe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,pe(l,"constructor",s),pe(s,"constructor",u),u.displayName="GeneratorFunction",pe(s,o,"GeneratorFunction"),pe(l),pe(l,o,"Generator"),pe(l,r,function(){return this}),pe(l,"toString",function(){return"[object Generator]"}),(le=function(){return{w:i,m:p}})()}function pe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}pe=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){pe(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},pe(t,e,n,r)}function de(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ve(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){de(i,r,o,a,c,"next",t)}function c(t){de(i,r,o,a,c,"throw",t)}a(void 0)})}}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,me(r.key),r)}}function me(t){var e=function(t){if("object"!=fe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fe(e)?e:e+""}var he=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"render",value:(r=ve(le().m(function t(){return le().w(function(t){for(;;)if(0===t.n)return t.a(2,'\n      <div class="wrapper">\n        <div class="title">\n          Register Form\n        </div>\n        <form id="register-form">\n          <div class="field">\n            <input type="text" id="name" required>\n            <label>Nama</label>\n          </div>\n          <div class="field">\n            <input type="email" id="email" required>\n            <label>Email Address</label>\n          </div>\n          <div class="field">\n            <input type="password" id="password" required>\n            <label>Password</label>\n          </div>\n          <div class="field">\n            <input type="submit" value="Register">\n          </div>\n          <div class="signup-link">\n            Already have an account? <a href="#/login">Login here</a>\n          </div>\n          <div id="register-error" style="color:red; margin-top:1rem;"></div>\n        </form>\n      </div>\n    ')},t)})),function(){return r.apply(this,arguments)})},{key:"afterRender",value:(n=ve(le().m(function t(){var e,n;return le().w(function(t){for(;;)switch(t.n){case 0:e=document.getElementById("register-form"),n=document.getElementById("register-error"),e.addEventListener("submit",function(){var t=ve(le().m(function t(e){var r,o,i,a,c,u;return le().w(function(t){for(;;)switch(t.n){case 0:return e.preventDefault(),r=document.getElementById("name").value,o=document.getElementById("email").value,i=document.getElementById("password").value,t.p=1,t.n=2,fetch(se.REGISTER,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r,email:o,password:i})});case 2:if((a=t.v).ok){t.n=4;break}return t.n=3,a.json();case 3:return c=t.v,n.textContent=c.message||"Pendaftaran gagal",t.a(2);case 4:window.location.hash="#/login",t.n=6;break;case 5:t.p=5,u=t.v,n.textContent="Terjadi kesalahan saat menghubungi server",console.error(u);case 6:return t.a(2)}},t,null,[[1,5]])}));return function(e){return t.apply(this,arguments)}}());case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})}],e&&ye(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();const be={"/home":function(){return new _t},"/about":function(){return new Nt},"/add":function(){return new Yt},"/login":function(){return new ae},"/":function(){return new he},"/regist":function(){return new he}};var ge=function(){return window.location.hash.slice(1).toLowerCase()||"/"};function we(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Se(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Se(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Se(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Se(l,"constructor",s),Se(s,"constructor",u),u.displayName="GeneratorFunction",Se(s,o,"GeneratorFunction"),Se(l),Se(l,o,"Generator"),Se(l,r,function(){return this}),Se(l,"toString",function(){return"[object Generator]"}),(we=function(){return{w:i,m:p}})()}function Se(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Se=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Se(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Se(t,e,n,r)}function je(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Oe(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){je(i,r,o,a,c,"next",t)}function c(t){je(i,r,o,a,c,"throw",t)}a(void 0)})}}function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}function ke(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Pe(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Pe(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Pe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Pe(l,"constructor",s),Pe(s,"constructor",u),u.displayName="GeneratorFunction",Pe(s,o,"GeneratorFunction"),Pe(l),Pe(l,o,"Generator"),Pe(l,r,function(){return this}),Pe(l,"toString",function(){return"[object Generator]"}),(ke=function(){return{w:i,m:p}})()}function Pe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Pe=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Pe(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Pe(t,e,n,r)}function Ee(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Le(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ee(i,r,o,a,c,"next",t)}function c(t){Ee(i,r,o,a,c,"throw",t)}a(void 0)})}}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xe(r.key),r)}}function xe(t){var e=function(t){if("object"!=Te(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Te(e)?e:e+""}function _e(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function Ie(t,e){return t.get(Ce(t,e))}function Ae(t,e,n){return t.set(Ce(t,e),n),n}function Ce(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}document.addEventListener("DOMContentLoaded",Oe(we().m(function t(){var e;return we().w(function(t){for(;;)switch(t.n){case 0:return e=new Me({content:document.querySelector("#main-content"),drawerButton:document.querySelector("#drawer-button"),navigationDrawer:document.querySelector("#navigation-drawer")}),t.n=1,e.renderPage();case 1:window.addEventListener("hashchange",Oe(we().m(function t(){return we().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.renderPage();case 1:return t.a(2)}},t)})));case 2:return t.a(2)}},t)})));var Be=new WeakMap,Fe=new WeakMap,De=new WeakMap;const Me=function(){return t=function t(e){var n=e.navigationDrawer,r=e.drawerButton,o=e.content;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),_e(this,Be,null),_e(this,Fe,null),_e(this,De,null),Ae(Be,this,o),Ae(Fe,this,r),Ae(De,this,n),this._setupDrawer(),this._setupSkipLink()},e=[{key:"_setupDrawer",value:function(){var t=this;Ie(Fe,this).addEventListener("click",function(){Ie(De,t).classList.toggle("open")}),document.body.addEventListener("click",function(e){Ie(De,t).contains(e.target)||Ie(Fe,t).contains(e.target)||Ie(De,t).classList.remove("open"),Ie(De,t).querySelectorAll("a").forEach(function(n){n.contains(e.target)&&Ie(De,t).classList.remove("open")})})}},{key:"_setupSkipLink",value:function(){var t=document.querySelector(".skip-link"),e=document.querySelector("#main-content");t&&e&&function(t,e){t.addEventListener("click",function(t){t.preventDefault(),e.setAttribute("tabindex","-1"),e.focus()})}(t,e)}},{key:"setupNavigationList",value:function(){var t=document.querySelector("#nav-list");if(t){var e=!!localStorage.getItem("token");t.innerHTML='\n    <li><a href="#/home">Beranda</a></li>\n    <li><a href="#/add">Tambah Cerita</a></li>\n    <li><a href="#/about">Tentang</a></li>\n    '.concat(e?'<li><a href="#/logout">Keluar</a></li>':'<li><a href="#/login">Masuk</a></li>',"\n  ")}}},{key:"renderPage",value:(n=Le(ke().m(function t(){var e,n,r=this;return ke().w(function(t){for(;;)switch(t.n){case 0:if(e=ge(),n=(0,be[e])(),document.startViewTransition){t.n=3;break}return t.n=1,n.render();case 1:return Ie(Be,this).innerHTML=t.v,t.n=2,n.afterRender();case 2:return t.a(2);case 3:document.startViewTransition(Le(ke().m(function t(){return ke().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.render();case 1:return Ie(Be,r).innerHTML=t.v,t.n=2,n.afterRender();case 2:return t.a(2)}},t)}))).updateCallbackDone.then(function(){scrollTo({top:0,behavior:"instant"}),r.setupNavigationList()});case 4:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})}],e&&Ge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n}();function Ne(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return qe(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(qe(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,qe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,qe(l,"constructor",s),qe(s,"constructor",u),u.displayName="GeneratorFunction",qe(s,o,"GeneratorFunction"),qe(l),qe(l,o,"Generator"),qe(l,r,function(){return this}),qe(l,"toString",function(){return"[object Generator]"}),(Ne=function(){return{w:i,m:p}})()}function qe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}qe=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){qe(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},qe(t,e,n,r)}function Re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function We(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function He(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){We(i,r,o,a,c,"next",t)}function c(t){We(i,r,o,a,c,"throw",t)}a(void 0)})}}function Ke(){return Ue.apply(this,arguments)}function Ue(){return(Ue=He(Ne().m(function t(){return Ne().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Notification.requestPermission();case 1:if("granted"===t.v){t.n=2;break}throw new Error("Izin notifikasi ditolak");case 2:return t.a(2)}},t)}))).apply(this,arguments)}function Ve(){return ze.apply(this,arguments)}function ze(){return(ze=He(Ne().m(function t(){var e,n,r;return Ne().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch("".concat(h,"/vapid"));case 1:return e=t.v,t.n=2,e.json();case 2:return n=t.v,r=n.publicKey,t.a(2,r)}},t)}))).apply(this,arguments)}function Je(t){var e,n=(t+"=".repeat((4-t.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=atob(n);return new Uint8Array((e=r,function(t){if(Array.isArray(t))return Re(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return Re(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(t){return t.charCodeAt(0)}))}function $e(t){return Ye.apply(this,arguments)}function Ye(){return(Ye=He(Ne().m(function t(e){var n,r;return Ne().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,navigator.serviceWorker.ready;case 1:return n=t.v,t.n=2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Je(e)});case 2:return r=t.v,t.n=3,fetch("".concat(h,"/subscribe"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return t.a(2)}},t)}))).apply(this,arguments)}function Qe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return Xe(s,"_invoke",function(n,r,o){var i,c,u,s=0,f=o||[],l=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!l&&s&&!o&&e<f.length;e++){var o,i=f[e],d=p.p,v=i[2];n>3?(o=v===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<v&&(o=n<3||i[0]>r||r>v)&&(i[4]=n,i[5]=r,p.n=v,c=0))}if(o||n>1)return a;throw l=!0,r}return function(o,f,v){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),c=f,u=v;(e=c<2?t:u)||!l;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(l=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{s=1}}return{value:e,done:l}}}(n,o,i),!0),s}var a={};function c(){}function u(){}function s(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(Xe(e={},r,function(){return this}),e),l=s.prototype=c.prototype=Object.create(f);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,Xe(t,o,"GeneratorFunction")),t.prototype=Object.create(l),t}return u.prototype=s,Xe(l,"constructor",s),Xe(s,"constructor",u),u.displayName="GeneratorFunction",Xe(s,o,"GeneratorFunction"),Xe(l),Xe(l,o,"Generator"),Xe(l,r,function(){return this}),Xe(l,"toString",function(){return"[object Generator]"}),(Qe=function(){return{w:i,m:p}})()}function Xe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Xe=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){Xe(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},Xe(t,e,n,r)}function Ze(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function tn(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){Ze(i,r,o,a,c,"next",t)}function c(t){Ze(i,r,o,a,c,"throw",t)}a(void 0)})}}function en(){return(en=tn(Qe().m(function t(){var e,n;return Qe().w(function(t){for(;;)switch(t.n){case 0:return t.p=0,t.n=1,Ke();case 1:return t.n=2,Ve();case 2:return e=t.v,t.n=3,$e(e);case 3:console.log("Push notification setup berhasil!"),t.n=5;break;case 4:t.p=4,n=t.v,console.error("Gagal setup push notification:",n);case 5:return t.a(2)}},t,null,[[0,4]])}))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",tn(Qe().m(function t(){var e,n,r,o,i,a,c,u,s;return Qe().w(function(t){for(;;)switch(t.n){case 0:if(e=localStorage.getItem("token"),n=window.location.hash,r="#/login"===n||"#/regist"===n,o=document.querySelector("#main-content"),i=document.querySelector("#drawer-button"),a=document.querySelector("#navigation-drawer"),c=document.querySelector("#site-header"),u=document.querySelector("#site-footer"),o){t.n=1;break}return console.error("❌ #main-content tidak ditemukan di DOM"),t.a(2);case 1:return e||r||(window.location.hash="#/regist"),e||(c&&(c.style.display="none"),u&&(u.style.display="none"),i&&(i.style.display="none"),a&&(a.style.display="none")),s=new Me({content:o,drawerButton:i,navigationDrawer:a}),t.n=2,s.renderPage();case 2:window.addEventListener("hashchange",tn(Qe().m(function t(){return Qe().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,s.renderPage();case 1:return t.a(2)}},t)})));case 3:return t.a(2)}},t)}))),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js").then(function(t){return console.log("✅ SW terdaftar:",t)}).catch(function(t){return console.error("❌ SW gagal:",t)})}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("✅ Service Worker terdaftar"),function(){en.apply(this,arguments)}()}).catch(function(t){console.error("❌ SW gagal:",t)})})();